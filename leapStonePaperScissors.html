<html>
  <head>

  <style type="text/css">
    body {
      background: #FFFFCC; 
      color:#7575FF;
      font: 16px/1.8 sans-serif;
    }
    .container {
      width: 84%;
      margin:0 auto;
      max-width:1140px;
    }
    h1 {
      background: #FFFFCC;
      text-align: center;
      color:#CC0000;
      font: 95px/1 "Impact";
      text-transform: uppercase;
      display: block;
      text-shadow:#253e45 -1px 1px 0,
      #253e45 -2px 2px 0,
      #d45848 -3px 3px 0,
      #d45848 -4px 4px 0;
      margin: 5% auto 5%;
    }
  </style>

</head>

  <body>

    <div class="container">
    <h1 id="headline">Stone Paper Scissors</h1>
    <h1 style="float:left;margin-left:5%">Player</h1>
    <h1 style="float:right;margin-right:5%">Computer</h1>
    </div>

    <h1 id="show_competition_result"></h1>
    
    <img id="player_image" style="float:left;margin-top:0%"></img>
    <img id="computer_image" style="float:right;margin-top:0%"></img>

    <script src="leap.js"></script>
    <script src="jquery-2.1.3.min.js"></script>
    <script src="jquery.fittext.js"></script>
    <script type="text/javascript">

    $("#headline").fitText(1.1, { minFontSize: '50px', maxFontSize: '75px' });
    $("#show_competition_result").fitText(1.1, { minFontSize: '25px', maxFontSize: '45px' });

    function show_computer_hand(x){
      if(x==1){
        if(a%3==0 && v2== true && v1 == false && v3 == false){
          show_computer_stone();
          return 0;
        }
        if(a%3==1 && v2== true && v1 == false && v3 == false){
          show_computer_paper();
          return 1;
        }          
        if(a%3==2 && v2== true && v1 == false && v3 == false){
          show_computer_scissors();
          return 2;
        }        
      }

      if(x==2){
        if(b%3==0 && v3== true && v2 == false && v1 == false){
          show_computer_paper();
          return 1;
        }
        if(b%3==1 && v3== true && v2 == false && v1 == false){
          show_computer_stone();
          return 0;
        }          
        if(b%3==2 && v3== true && v2 == false && v1 == false){
          show_computer_scissors();
          return 2;
        }        
      }

      if(x==3){
        if(c%3==0 && v1== true && v2 == false && v3 == false){
          show_computer_scissors();
          return 2;
        }
        if(c%3==1 && v1== true && v2 == false && v3 == false){
          show_computer_paper();
          return 1;
        }         
        if(c%3==2 && v1== true && v2 == false && v3 == false){
           show_computer_stone();  
           return 0;      
        }

      }
    }

    function lm(l,m,x){

       if(x==3 && v1==true && v2==false && v3== false){
        if(m!=1 && m!=2)
          show_competition_result.innerHTML="Draw";
        if(l==1 && m==0)
          show_competition_result.innerHTML="You Win!";
        else if(l==2 && m==1)
          show_competition_result.innerHTML="You Win!";
        else if(l==0 && m==2)
          show_competition_result.innerHTML="You Win!";
        else if(m==1 && l==0)
          show_competition_result.innerHTML="You Lose!";
        else if(m==2 && l==1)
          show_competition_result.innerHTML="You Lose!";
        else if(m==0 && l==2)
          show_competition_result.innerHTML="You Lose!";
        return 0;
      }

      if(x==2 && v3==true && v1==false && v2==false){
        if(m!=0 && m!=1)
          show_competition_result.innerHTML="Draw";
        if(l==1 && m==0)
          show_competition_result.innerHTML="You Win!";
        else if(l==2 && m==1)
          show_competition_result.innerHTML="You Win!";
        else if(l==0 && m==2)
          show_competition_result.innerHTML="You Win!";
        else if(m==1 && l==0)
          show_competition_result.innerHTML="You Lose!";
        else if(m==2 && l==1)
          show_competition_result.innerHTML="You Lose!";
        else if(m==0 && l==2)
          show_competition_result.innerHTML="You Lose!";
        return 0;
      }

      if(x==1 && v2==true && v1==false && v3==false){
        if(m!=0 && m!=2)
          show_competition_result.innerHTML="Draw";
        if(l==1 && m==0)
          show_competition_result.innerHTML="You Win!";
        else if(l==2 && m==1)
          show_competition_result.innerHTML="You Win!";
        else if(l==0 && m==2)
          show_competition_result.innerHTML="You Win!";
        else if(m==1 && l==0)
          show_competition_result.innerHTML="You Lose!";
        else if(m==2 && l==1)
          show_competition_result.innerHTML="You Lose!";
        else if(m==0 && l==2)
          show_competition_result.innerHTML="You Lose!";
        return 0;
      }
    }

    function show_computer_stone(){
      document.getElementById('computer_image').src='stone1.jpg';
    }
    function show_computer_paper(){
      document.getElementById('computer_image').src='paper1.jpg';
    }
    function show_computer_scissors(){
      document.getElementById('computer_image').src='scissors1.jpg';
    }
    function nocomputershow(){
      document.getElementById('computer_image').src='';
    }


    function show_stone(){
      if(v1==true && v2==false && v3== false)
      document.getElementById('player_image').src='stone1.jpg';
    }
    function show_paper(){
      if(v2==true && v1==false && v3==false)
      document.getElementById('player_image').src='paper1.jpg';
    }
    function show_scissors(){
      if(v3==true && v1==false && v2==false)
      document.getElementById('player_image').src='scissors1.jpg';
    }
    function noshow(){
      document.getElementById('player_image').src='';
    }

    var options = { enableGestures: true };
    var finger_count =0;
    var m=0;
    var v1= true;
    var v2 = true;
    var v3 = true;

    Leap.loop(options, function(frame){

      finger_count = 0;

      frame.fingers.forEach(function(fingers){
      if(fingers.extended)
        finger_count++;
      });

      if(finger_count>4){
        v1= false;
        v3=false;
        show_paper();
        x=1;
        l=1;
        m = show_computer_hand(x);
        lm(l,m,x);
      }
      else if(finger_count==2){        
        v1= false;
        v2= false;
        show_scissors();
        x=2;
        l=2;
        m = show_computer_hand(x);
        lm(l,m,x);
      }
      else if(frame.hands.length != 0 && finger_count==0){  
        v2= false;
        v3 = false;
        show_stone();
        x=3;
        l=0
        m = show_computer_hand(x);
        lm(l,m,x);
      }
      else if(frame.hands.length==0){
        show_competition_result.innerHTML="";
        noshow();
        nocomputershow();
        v1=true;
        v2=true;
        v3=true;
        var d1 = new Date();
        a=d1.getMilliseconds();
        var d2 = new Date();
        b=d2.getMilliseconds();
        var d3 = new Date();
        c=d3.getMilliseconds();
      }
   
    });
    
    </script>
  </body>
</html>
